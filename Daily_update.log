8. smack app rule. 

echo "User::App::launcher User::App::agl-service-nfc  rwx "    > /sys/fs/smackfs/load2 
echo "User::App::launcher User::App::windowmanager-service  rwx "    > /sys/fs/smackfs/load2 

/usr/share/security-manager/policy/app-rules-template.smack 

How to apply the app rule smack file ? such as  
subject="User::App::agl-identity-service" object="User::App::agl-service-nfc"

??? 

7. nfc  error 
libneardal.so.0

:/# systemctl  status afm-service-agl-service-nfc--1.0-a840056--main@0.ser
vice  --no-page  -l
‚óè afm-service-agl-service-nfc--1.0-a840056--main@0.service - Binding for handling NFC access controls
   Loaded: loaded (/var/local/lib/systemd/system/afm-user-session@.target.wants/../afm-service-agl-service-nfc--1.0-a840056--main@.service; disabled; vendor preset: enabled)
   Active: failed (Result: exit-code) since Wed 2019-08-07 10:20:40 UTC; 4s ago
  Process: 1509 ExecStart=/usr/bin/afb-daemon --name afbd-agl-service-nfc@1.0-a840056 --rootdir=/var/local/lib/afm/applications/agl-service-nfc/1.0-a840056 --workdir=/home/0/app-data/agl-service-nfc --no-httpd --binding=/var/local/lib/afm/applications/agl-service-nfc/1.0-a840056/lib/libafm-nfc-binding.so --ws-server=sd:nfc (code=exited, status=1/FAILURE)
  Process: 1508 ExecStartPre=/bin/mkdir -p /home/0/app-data/agl-service-nfc (code=exited, status=0/SUCCESS)
 Main PID: 1509 (code=exited, status=1/FAILURE)

Aug 07 10:20:40  systemd[1]: Starting Binding for handling NFC access controls...
Aug 07 10:20:40  afbd-agl-service-nfc@1.0-a840056[1509]:  ERROR: binding [/var/local/lib/afm/applications/agl-service-nfc/1.0-a840056/lib/libafm-nfc-binding.so] not loadable: libneardal.so.0: cannot open shared object file: No such file or directory [/poky/build/tmp-glibc/work/aarch64-agl-linux/af-binder/halibut+gitAUTOINC+91de2500d8-r0/git/src/afb-api-so.c:83,load_binding]
Aug 07 10:20:40  afbd-agl-service-nfc@1.0-a840056[1509]:  ERROR: can't start the binding /var/local/lib/afm/applications/agl-service-nfc/1.0-a840056/lib/libafm-nfc-binding.so [poky/build/tmp-glibc/work/aarch64-agl-linux/af-binder/halibut+gitAUTOINC+91de2500d8-r0/git/src/main-afb-daemon.c:178,apiset_start_list]
Aug 07 10:20:40  systemd[1]: afm-service-agl-service-nfc--1.0-a840056--main@0.service: Main process exited, code=exited, status=1/FAILURE
Aug 07 10:20:40  systemd[1]: afm-service-agl-service-nfc--1.0-a840056--main@0.service: Failed with result 'exit-code'.
Aug 07 10:20:40  systemd[1]: Failed to start Binding for handling NFC access controls.

systemd[1]: Failed to start Binding for handling NFC access controls.
Solution: add neardal  to rootfs. 

1. Kernel hardening

The kernel itself has protections enabled to make it more difficult to become compromised.

https://wiki.ubuntu.com/Security/Features#Kernel_Hardening 
https://wiki.debian.org/Hardening
https://wiki.gentoo.org/wiki/Project:Hardened
https://wiki.gentoo.org/wiki/Hardened/Toolchain
https://www.suse.com/documentation/sles-12/book_hardening/data/book_hardening.html

2. AGL application framework deamon / homescreen . 

https://wiki.automotivelinux.org/agl-distro/app-framework
https://docs.automotivelinux.org/docs/en/master/getting_started/reference/getting-started/getting-started-welcome.html
https://docs.automotivelinux.org/docs/en/master/apis_services/reference/af-main/0-introduction.html
https://gerrit.automotivelinux.org/gerrit/admin/repos
https://paul.pub/automotive-linux/#id-%E4%BA%BA%E6%9C%BA%E7%95%8C%E9%9D%A2%E6%A1%86%E6%9E%B6

3. yocto. meta-gplv2

http://git.yoctoproject.org/cgit/cgit.cgi/meta-gplv2/

4. smack smackfs  failed.

https://github.com/intel/meta-intel-iot-security/tree/master/meta-security-smack

issue: smack.cfg cannot applied for kernel config. 

solution:
    a. enable AGL and meta-meta-intel-iot-security layer.
    b. just enable meta-intel-iot-security. 
    
QA: 
    maybe can use 001 code rb?  to check . 
    001 how works ?
    001 security layer ?  agl  or ? 

5. AGL upgrade 
    homescreen.   afm-user-session
    afm-system-daemon.service
    afm-system-daemon

6. systemd fstab 
    persist mount ? 
    
